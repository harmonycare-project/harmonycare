<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>쉬운 그림 퀴즈 게임</title>
    <link href="https://fonts.googleapis.com/css2?family=Dongle&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to bottom, #ecf8e9, #f0f7fb);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      font-family: 'Dongle', sans-serif;
    }
        h1 {
            font-size: 50px;
            color: #2e7d32;
            margin-bottom: 10px;
        }
        #question {
            font-size: 40px;
            margin-bottom: 20px;
            color: #333;
        }
        .options {
    display: flex;
    gap: 20px; /* 버튼 사이 간격 추가 */
}
.option-btn {
    border: 1px solid #333;
    border-radius: 15px;
    padding: 20px;
    cursor: pointer;
    width: 180px;
    transition: transform 0.2s, background-color 0.3s, border-color 0.3s;
    background-color: #fff;
    font-size: 30px;
    text-align: center;
}
.option-btn:hover {
    transform: scale(1.05);
    background-color: #f1f8e9;
}
.option-btn img {
    width: 150px;
    height: 150px;
    display: block;
    margin: 0 auto;
    margin-bottom: 10px;
}
.option-btn.correct {
    background-color: #a5d6a7; /* Green */
    border-color: #4caf50;
}
.option-btn.incorrect {
    background-color: #ef9a9a; /* Red */
    border-color: #f44336;
}
.result-screen {
    display: none; /* Initially hidden */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 40px;
}
.result-screen button {
    font-family: 'Dongle', sans-serif;
    font-size: 30px;
    padding: 10px 25px;
    margin-top: 20px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background-color: #ffd54f;
    transition: background-color 0.2s;
}
    </style>
</head>
<body>
    <h1>쉬운 그림 퀴즈 게임</h1>
    <div id="question"></div>
    <div class="options">
        <div class="option-btn" id="option1" onclick="checkAnswer(1)"></div>
        <div class="option-btn" id="option2" onclick="checkAnswer(2)"></div>
        <div class="option-btn" id="option3" onclick="checkAnswer(3)"></div>
    </div>

    <div id="resultScreen" class="result-screen">
        <div id="finalScore"></div>
        <button onclick="restartGame()">다시하기</button>
        <button onclick="goHome()">홈으로</button>
    </div>

<script>
const quiz = [
    {
        text: "사과는 무슨 색?",
        options: ["빨강", "파랑", "보라"],
        images: ["apple_r.png", "apple_b.png", "apple_purple.png"],
        answer: 1 // 정답: 빨강 (1번)
    },
    // 'questionImage' 속성을 추가했습니다. 어려운 모드일 때 질문 대신 이 이미지가 표시됩니다. (PNG 경로)
       {text: "강아지는?",
        options: ["동물", "과일", "자동차"],
        images: ["dog.png", "fruit.png", "car.png"],
        answer: 1 // 정답: 동물 (1번)
    },
    {
        text: "바나나는 무슨 색?",
        options: ["노랑", "초록", "분홍"],
        images: ["banana.png", "bananag.png", "bananapink.png"],
        answer: 1 // 정답: 노랑 (1번)
    },
    { 
        text: "호랑이 그림을 찾으세요", 
        options: ["호랑이", "사자", "코끼리"], 
        images: ["tiger.png", "lion.png", "elephant.png"], 
        answer: 1 
    },
    { 
        text: "돼지 그림을 찾으세요", 
        options: ["토끼", "돼지", "말"], 
        images: ["rabbit.png", "pig.png", "horse.png"], 
        answer: 2 
    },
    { 
        text: "다람쥐 그림을 찾으세요", 
        options: ["다람쥐", "고양이", "기린"], 
        images: ["squirrel.png", "cat.png", "giraffe.png"], 
        answer: 1 
    },
    {
        text: "하늘에 떠 있는 것은?",
        options: ["구름", "나무", "집"],
        images: ["cloud.png", "tree.png", "house.png"],
        answer: 1
    },
    {
        text: "물고기는 어디에 살까요?",
        options: ["새", "물고기", "나비"],
        images: ["bird.png", "fish.png", "butterfly.png"],
        answer: 2
    },
    {
        text: "신호등의 빨간불은 무엇을 의미할까요?",
        options: ["가세요", "준비하세요", "멈추세요"],
        images: ["go.png", "ready.png", "stop.png"],
        answer: 3
    }
];

let currentQuestionIndex = 0;
let score = 0;
let isAnswerable = true;

const questionEl = document.getElementById("question");
const optionsEl = document.querySelector(".options");
const resultScreenEl = document.getElementById("resultScreen");

function loadQuestion() {
    isAnswerable = true;
    const q = quiz[currentQuestionIndex];
    questionEl.innerText = `Q${currentQuestionIndex + 1}. ${q.text}`;

    for (let i = 0; i < q.options.length; i++) {
        const btn = document.getElementById(`option${i+1}`);
        btn.innerHTML = `<img src="${q.images[i]}" alt="${q.options[i]}"><span>${q.options[i]}</span>`;
        btn.className = 'option-btn'; // Reset classes
    }
}

function checkAnswer(choice) {
    if (!isAnswerable) return;
    isAnswerable = false;

    const q = quiz[currentQuestionIndex];
    const selectedBtn = document.getElementById(`option${choice}`);
    
    if (choice === q.answer) {
        score++;
        selectedBtn.classList.add('correct');
    } else {
        selectedBtn.classList.add('incorrect');
        const correctBtn = document.getElementById(`option${q.answer}`);
        correctBtn.classList.add('correct');
    }

    setTimeout(() => {
        currentQuestionIndex++;
        if (currentQuestionIndex >= quiz.length) {
            showResult();
        } else {
            loadQuestion();
        }
    }, 1500); // 1.5초 후 다음 문제로
}

function showResult() {
    questionEl.style.display = 'none';
    optionsEl.style.display = 'none';
    resultScreenEl.style.display = 'flex';
    document.getElementById('finalScore').innerText = `총 ${quiz.length}문제 중 ${score}문제를 맞혔어요!`;
}

function restartGame() {
    currentQuestionIndex = 0;
    score = 0;
    resultScreenEl.style.display = 'none';
    questionEl.style.display = 'block';
    optionsEl.style.display = 'flex';
    loadQuestion();
}

function goHome() {
    window.location.href = 'main.html';
}

window.onload = loadQuestion;
</script>

</body>
</html>
        ],
        answer: 1
    },
    {
        text: "강아지 그림을 고르세요.",
        options: ["강아지", "고양이", "기린"],
        images: [
            `<svg viewBox="0 0 100 100"><path d="M25,80 L25,60 C25,40 40,40 40,60 L40,80 M60,80 L60,60 C60,40 75,40 75,60 L75,80 M20,70 L80,70 L80,85 L20,85 Z" fill="#c7a600" stroke="black" stroke-width="2"></path><circle cx="50" cy="45" r="25" fill="#f0c400" stroke="black" stroke-width="2"></circle><circle cx="40" cy="40" r="4" fill="black"></circle><circle cx="60" cy="40" r="4" fill="black"></circle><path d="M45,55 Q50,65 55,55" fill="none" stroke="black" stroke-width="3"></path><path d="M25,45 C15,50 15,30 25,35" fill="#f0c400" stroke="black" stroke-width="1"></path><path d="M75,45 C85,50 85,30 75,35" fill="#f0c400" stroke="black" stroke-width="1"></path></svg>`,
            `<svg viewBox="0 0 100 100"><circle cx="50" cy="55" r="25" fill="#FFB74D" stroke="black" stroke-width="2"></circle><path d="M35,40 L40,30 L45,40 Z M65,40 L60,30 L55,40 Z" fill="#FFB74D" stroke="black" stroke-width="1"></path><circle cx="42" cy="55" r="3" fill="black"></circle><circle cx="58" cy="55" r="3" fill="black"></circle><path d="M45,65 Q50,70 55,65" stroke="black" stroke-width="2" fill="none"></path></svg>`,
            `<svg viewBox="0 0 100 100"><rect x="45" y="20" width="10" height="50" fill="#FFC107" stroke="black" stroke-width="2"></rect><rect x="40" y="70" width="20" height="10" fill="#FFC107" stroke="black" stroke-width="2"></rect><circle cx="50" cy="15" r="10" fill="#FFC107" stroke="black" stroke-width="2"></circle><circle cx="42" cy="40" r="3" fill="#795548" stroke="black" stroke-width="1"></circle><circle cx="58" cy="50" r="4" fill="#795548" stroke="black" stroke-width="1"></circle></svg>`
        ],
        answer: 1
    },
    {
        text: "하늘에 떠 있는 것은?",
        options: ["구름", "나무", "집"],
        images: [
            `<svg viewBox="0 0 100 100"><path d="M20,60 C0,60 0,40 25,40 C30,20 60,20 70,40 C95,40 95,60 80,60 Z" fill="#E3F2FD" stroke="black" stroke-width="2"></path></svg>`,
            `<svg viewBox="0 0 100 100"><rect x="45" y="50" width="10" height="40" fill="#8D6E63" stroke="black" stroke-width="2"></rect><circle cx="50" cy="35" r="25" fill="#81C784" stroke="black" stroke-width="2"></circle></svg>`,
            `<svg viewBox="0 0 100 100"><polygon points="15,40 85,40 50,10" fill="#F44336" stroke="black" stroke-width="2"></polygon><rect x="20" y="40" width="60" height="50" fill="#FFEB3B" stroke="black" stroke-width="2"></rect><rect x="40" y="60" width="20" height="30" fill="#8D6E63" stroke="black" stroke-width="1"></rect></svg>`
        ],
        answer: 1
    },
    {
        text: "물 속에서 사는 것은?",
        options: ["새", "물고기", "나비"],
        images: [
            `<svg viewBox="0 0 100 100"><path d="M20,50 C40,30 60,30 80,50 L90,40" stroke="#42A5F5" stroke-width="5" fill="none" stroke-linecap="round"></path><path d="M20,50 C40,70 60,70 80,50" stroke="#42A5F5" stroke-width="5" fill="none" stroke-linecap="round"></path><circle cx="70" cy="45" r="3" fill="black"></circle></svg>`, /* 새는 이미 stroke가 있어서 그대로 둠 */
            `<svg viewBox="0 0 100 100"><path d="M20,50 C60,20 80,80 20,50 Z" fill="#29B6F6" stroke="black" stroke-width="2"></path><circle cx="30" cy="45" r="3" fill="white" stroke="black" stroke-width="1"></circle><path d="M70,50 C80,40 80,60 70,50 Z" fill="#FFCA28" stroke="black" stroke-width="1"></path></svg>`,
            `<svg viewBox="0 0 100 100"><path d="M50,50 C10,20 40,80 50,50 Z M50,50 C90,20 60,80 50,50 Z" fill="#FF7043" stroke="black" stroke-width="2"></path><line x1="50" y1="20" x2="50" y2="50" stroke="black" stroke-width="3"></line></svg>`
        ],
        answer: 2
    },
    {
        text: "신호등의 빨간불은 무엇을 의미할까요?",
        options: ["가세요", "준비하세요", "멈추세요"],
        images: [
            `<svg viewBox="0 0 100 100"><rect x="30" y="10" width="40" height="80" rx="5" fill="#424242" stroke="black" stroke-width="2"></rect><circle cx="50" cy="70" r="12" fill="#4CAF50" stroke="black" stroke-width="1"></circle></svg>`,
            `<svg viewBox="0 0 100 100"><rect x="30" y="10" width="40" height="80" rx="5" fill="#424242" stroke="black" stroke-width="2"></rect><circle cx="50" cy="50" r="12" fill="#FFEB3B" stroke="black" stroke-width="1"></circle></svg>`,
            `<svg viewBox="0 0 100 100"><rect x="30" y="10" width="40" height="80" rx="5" fill="#424242" stroke="black" stroke-width="2"></rect><circle cx="50" cy="30" r="12" fill="#F44336" stroke="black" stroke-width="1"></circle></svg>`
        ],
        answer: 3
    },
    {
        text: "호랑이 그림을 찾으세요",
        options: ["호랑이", "사자", "코끼리"],
        images: [
            `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="30" fill="#FF9800" stroke="black" stroke-width="2"></circle><path d="M30,40 L70,40 M30,50 L70,50 M30,60 L70,60" stroke="black" stroke-width="4"></path><circle cx="40" cy="45" r="3" fill="black"></circle><circle cx="60" cy="45" r="3" fill="black"></circle></svg>`,
            `<svg viewBox="0 0 100 100"><circle cx="50" cy="55" r="25" fill="#FFC107" stroke="black" stroke-width="2"></circle><path d="M30,30 L70,30 L70,45 L30,45Z" fill="#A1887F" stroke="black" stroke-width="2"></path><circle cx="42" cy="55" r="3" fill="black"></circle><circle cx="58" cy="55" r="3" fill="black"></circle></svg>`,
            `<svg viewBox="0 0 100 100"><path d="M20,80 C40,40 60,40 80,80 Z" fill="#B0BEC5" stroke="black" stroke-width="2"></path><path d="M80,50 C100,40 100,80 80,80" fill="#B0BEC5" stroke="black" stroke-width="2"></path><circle cx="70" cy="55" r="3" fill="black"></circle></svg>`
        ],
        answer: 1
    },
    {
        text: "돼지 그림을 찾으세요",
        options: ["토끼", "돼지", "말"],
        images: [
            `<svg viewBox="0 0 100 100"><path d="M50,80 C30,80 30,50 50,50 C70,50 70,80 50,80Z" fill="white" stroke="black" stroke-width="2"></path><path d="M40,50 C35,20 45,20 50,50Z M60,50 C65,20 55,20 50,50Z" fill="white" stroke="black" stroke-width="1"></path></svg>`,
            `<svg viewBox="0 0 100 100"><circle cx="50" cy="60" r="25" fill="#F8BBD0" stroke="black" stroke-width="2"></circle><circle cx="45" cy="55" r="3"></circle><circle cx="55" cy="55" r="3"></circle><ellipse cx="50" cy="65" rx="8" ry="5" fill="#F48FB1" stroke="black" stroke-width="1"></ellipse></svg>`,
            `<svg viewBox="0 0 100 100"><path d="M30,80 L30,40 L60,30 L70,40 L70,80 Z" fill="#A1887F" stroke="black" stroke-width="2"></path><path d="M60,30 L50,10 L40,30" fill="#A1887F" stroke="black" stroke-width="1"></path></svg>`
        ],
        answer: 2
    }
];

let dailyQuiz = [];
let currentQuestionIndex = 0;
let score = 0;
let isAnswerable = true;

const questionEl = document.getElementById("question");
const optionsEl = document.querySelector(".options");
const resultScreenEl = document.getElementById("resultScreen");

function initializeDailyQuiz() {
    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD 형식
    const lastPlayedDate = localStorage.getItem('quizLastPlayedDate');
    const storedQuiz = localStorage.getItem('dailyQuiz');

    if (lastPlayedDate === today && storedQuiz) {
        // 오늘 이미 퀴즈를 받았다면, 저장된 퀴즈를 불러옵니다.
        dailyQuiz = JSON.parse(storedQuiz);
    } else {
        // 새로운 날이거나 처음 플레이하는 경우, 새로운 퀴즈를 생성합니다.
        const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
        dailyQuiz = shuffled.slice(0, 3);
        
        localStorage.setItem('quizLastPlayedDate', today);
        localStorage.setItem('dailyQuiz', JSON.stringify(dailyQuiz));
    }
    loadQuestion();
}

function loadQuestion() {
    // 퀴즈가 없으면 시작하지 않음
    if (dailyQuiz.length === 0) {
        questionEl.innerText = "오늘의 퀴즈를 모두 풀었어요!";
        optionsEl.style.display = 'none';
        resultScreenEl.style.display = 'none';
        // 홈으로 가는 버튼 등을 보여줄 수 있습니다.
        const homeButton = document.createElement('button');
        homeButton.innerText = '홈으로 가기';
        homeButton.onclick = goHome;
        questionEl.parentElement.appendChild(homeButton);
        return;
    }

    isAnswerable = true;
    const q = dailyQuiz[currentQuestionIndex];
    questionEl.innerText = `Q${currentQuestionIndex + 1}. ${q.text}`;

    for (let i = 0; i < q.options.length; i++) {
        const btn = document.getElementById(`option${i+1}`);
        btn.innerHTML = `${q.images[i]}<span>${q.options[i]}</span>`;
        btn.className = 'option-btn'; // Reset classes
    }
}

function checkAnswer(choice) {
    if (!isAnswerable) return;
    isAnswerable = false;

    const q = dailyQuiz[currentQuestionIndex];
    const selectedBtn = document.getElementById(`option${choice}`);
    
    if (choice === q.answer) {
        score++;
        selectedBtn.classList.add('correct');
    } else {
        selectedBtn.classList.add('incorrect');
        const correctBtn = document.getElementById(`option${q.answer}`);
        correctBtn.classList.add('correct');
    }

    setTimeout(() => {
        currentQuestionIndex++;
        if (currentQuestionIndex >= dailyQuiz.length) {
            showResult();
        } else {
            loadQuestion();
        }
    }, 1500); // 1.5초 후 다음 문제로
}

function showResult() {
    questionEl.style.display = 'none';
    optionsEl.style.display = 'none';
    resultScreenEl.style.display = 'flex';
    document.getElementById('finalScore').innerText = `총 ${dailyQuiz.length}문제 중 ${score}문제를 맞혔어요!`;

    const congratulatoryMessageEl = document.getElementById('congratulatoryMessage');
    let message = '';
    let messageColor = '';
    if (score === dailyQuiz.length) {
        message = "완벽해요! 모든 문제를 맞혔어요!";
        messageColor = '#4CAF50'; // Green
    } else if (score >= dailyQuiz.length / 2) { // 3문제 중 2개 이상 맞췄을 때 (2 또는 3)
        message = "잘했어요! 다음엔 더 잘할 수 있을 거예요!";
        messageColor = '#FFC107'; // Amber
    } else { // 3문제 중 0개 또는 1개 맞췄을 때
        message = "조금 더 노력해봐요! 다음에 다시 도전해봐요!";
        messageColor = '#F44336'; // Red
    }
    congratulatoryMessageEl.innerText = message;
    congratulatoryMessageEl.style.color = messageColor;
}

function restartGame() {
    currentQuestionIndex = 0;
    score = 0;
    resultScreenEl.style.display = 'none';
    questionEl.style.display = 'block';
    optionsEl.style.display = 'flex';
    initializeDailyQuiz(); // 게임을 다시 시작할 때도 오늘의 퀴즈를 다시 불러옵니다.
}

function goHome() {
    window.location.href = 'main.html';
}

window.onload = initializeDailyQuiz;
</script>

</body>
</html>

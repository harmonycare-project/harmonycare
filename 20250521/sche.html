<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>자폐아동용 시각적 시간표</title>
<style>
body {
    font-family: "맑은 고딕", sans-serif;
    text-align: center;
    margin: 20px;
    background-color: #fdf6e3;
}
h1 {
    margin-bottom: 10px;
    color: #2e7d32;
}
#score {
    font-size: 20px;
    margin-bottom: 20px;
}
.schedule {
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: center;
}
.activity {
    width: 250px;
    border: 2px solid #333;
    padding: 10px;
    cursor: pointer;
    transition: transform 0.2s, background-color 0.3s;
    border-radius: 10px;
    background-color: #fff8e1;
    position: relative;
}
.activity img {
    width: 80px;
    height: 80px;
    display: block;
    margin: 0 auto 5px auto;
}
.activity:hover {
    transform: scale(1.05);
}
.completed {
    background-color: #8BC34A; 
}
.sticker {
    position: absolute;
    top: -10px;
    right: -10px;
    width: 40px;
    height: 40px;
    animation: bounce 0.5s ease;
}
@keyframes bounce {
    0% { transform: scale(0); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}
</style>
</head>
<body>

<h1>시각적 시간표</h1>
<div id="score">활동 완료: 0 / 0</div>
<div class="schedule" id="schedule"></div>

<script>
// 시간표 데이터
const activities = [
    { name: "아침 세면", image: "images/toothbrush.png", time: "09:00", completed: false },
    { name: "아침 식사", image: "images/breakfast.png", time: "09:30", completed: false },
    { name: "학교 가기", image: "images/school.png", time: "10:00", completed: false },
    { name: "점심", image: "images/lunch.png", time: "12:00", completed: false },
    { name: "낮잠", image: "images/bed.png", time: "13:00", completed: false },
    { name: "놀이 시간", image: "images/play.png", time: "15:00", completed: false }
];

let score = 0;

function renderSchedule() {
    const container = document.getElementById("schedule");
    container.innerHTML = "";
    activities.forEach((act, index) => {
        const div = document.createElement("div");
        div.className = "activity" + (act.completed ? " completed" : "");
        div.innerHTML = `
            <img src="${act.image}" alt="${act.name}">
            <div>${act.name}</div>
            <div style="font-size:12px; color:#555;">${act.time}</div>
        `;
        div.addEventListener("click", () => {
            if (!act.completed) {
                act.completed = true;
                score++;
                div.classList.add("completed");
                addSticker(div);
                updateScore();
                checkAllCompleted();
            }
        });
        container.appendChild(div);
    });
    updateScore();
}

function updateScore() {
    document.getElementById("score").innerText = `활동 완료: ${score} / ${activities.length}`;
}

function checkAllCompleted() {
    if (activities.every(act => act.completed)) {
        alert("🎉 오늘의 모든 활동 완료! 잘했어요! 🎉");
    }
}

function addSticker(activityDiv) {
    const sticker = document.createElement("img");
    sticker.src = "images/sticker.png"; // 스티커 이미지
    sticker.className = "sticker";
    activityDiv.appendChild(sticker);
}

// 알람 기능
function checkAlarms() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2,"0");
    const minutes = String(now.getMinutes()).padStart(2,"0");
    activities.forEach(act => {
        if (!act.completed && act.time === `${hours}:${minutes}`) {
            alert(`⏰ ${act.name} 시간이에요!`);
        }
    });
}

// 1분마다 알람 체크
setInterval(checkAlarms, 60000);

// 초기 렌더링
renderSchedule();
</script>

</body>
</html>